# Story 2.5: Delete Task API

## Status
Ready

## Story

**As a** user,  
**I want** to delete a task,  
**so that** I can remove completed or irrelevant tasks from my list.

## Acceptance Criteria

1. API endpoint `DELETE /tasks/:id` removes the specified task
2. Endpoint requires authentication and verifies task belongs to authenticated user (return 404 if not found or unauthorized)
3. Successful deletion returns 204 No Content status
4. Deleted task is permanently removed from database
5. Attempting to access deleted task returns 404
6. Unit tests cover: successful deletion, ownership verification, non-existent task handling

## Tasks / Subtasks

- [ ] Task 1: Implement delete_task in service (AC: 1, 2, 4)
  - [ ] Update `backend/src/services/task_service.py`
  - [ ] Implement `async def delete_task(self, task_id: str, owner_id: str) -> bool`
  - [ ] Call task_repository.delete_task(ObjectId(task_id), ObjectId(owner_id))
  - [ ] Return True if deleted, False if not found

- [ ] Task 2: Create DELETE /tasks/:id route (AC: 1, 2, 3)
  - [ ] Update `backend/src/api/v1/tasks.py`
  - [ ] Implement `DELETE /tasks/{task_id}` with authentication
  - [ ] Validate task_id format
  - [ ] Call task_service.delete_task()
  - [ ] If False returned, raise HTTPException(404)
  - [ ] Return 204 No Content on success

- [ ] Task 3: Write tests (AC: 5, 6)
  - [ ] Update `backend/tests/test_tasks.py`
  - [ ] Test successful deletion: DELETE returns 204
  - [ ] Test ownership: cannot delete other user's task (404)
  - [ ] Test non-existent task: returns 404
  - [ ] Test task removed: GET after DELETE returns 404

## Dev Notes

**[Source: docs/architecture/api-specification.md#DELETE /tasks/{id}]**

**Endpoint:** `DELETE /tasks/{task_id}`  
**Auth:** Required  
**Success:** 204 No Content (no response body)

**CRITICAL:** Ownership verification in repository prevents unauthorized deletion.

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-12 | 1.0 | Story created from Epic 2 | Bob (SM) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent after implementation_
