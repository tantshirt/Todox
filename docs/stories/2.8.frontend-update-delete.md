# Story 2.8: Frontend Update & Delete Task Actions

## Status
Ready

## Story

**As a** user,  
**I want** to edit or delete tasks directly from the task list,  
**so that** I can quickly manage my todos without extra navigation.

## Acceptance Criteria

1. Each task in the list has Edit and Delete action buttons
2. Edit button opens form (modal or dedicated page) pre-filled with current task data
3. Edit form allows updating: title, description, priority, deadline, status (toggle open/done)
4. Edit form submission calls `PATCH /tasks/:id` and updates task in list on success
5. Delete button shows confirmation dialog before deletion
6. Confirmed deletion calls `DELETE /tasks/:id` and removes task from list on success
7. Status toggle (checkbox or switch) directly updates task status between open/done via `PATCH /tasks/:id`
8. All actions show loading states during API calls
9. Success/error feedback provided via toasts
10. Changes persist across page refresh (verified by refetching task list)

## Tasks / Subtasks

- [ ] Task 1: Add update and delete mutations to useTasks (AC: 4, 6, 7)
  - [ ] Update `frontend/src/hooks/useTasks.ts`
  - [ ] Add updateTask mutation for PATCH /tasks/:id
  - [ ] Add deleteTask mutation for DELETE /tasks/:id
  - [ ] Both mutations update React Query cache optimistically

- [ ] Task 2: Create TaskEditModal component (AC: 2, 3, 4, 8, 9)
  - [ ] Create `frontend/src/components/tasks/TaskEditModal.tsx`
  - [ ] Similar to Create modal but pre-filled with task data
  - [ ] Include status toggle (Checkbox or Switch component)
  - [ ] On submit: call updateTask mutation

- [ ] Task 3: Create TaskDeleteConfirm dialog (AC: 5, 6, 8, 9)
  - [ ] Create `frontend/src/components/tasks/TaskDeleteConfirm.tsx`
  - [ ] Use AlertDialog from Shadcn
  - [ ] Show task title in confirmation message
  - [ ] On confirm: call deleteTask mutation

- [ ] Task 4: Update TaskCard with action buttons (AC: 1, 7)
  - [ ] Update `frontend/src/components/tasks/TaskCard.tsx`
  - [ ] Add Edit button (Pencil icon) that opens TaskEditModal
  - [ ] Add Delete button (Trash icon) that opens confirmation
  - [ ] Checkbox onChange calls updateTask with toggled status
  - [ ] Show loading state on checkbox during status update

- [ ] Task 5: Integrate edit/delete into task list page (AC: All)
  - [ ] Update `frontend/src/app/tasks/page.tsx`
  - [ ] Pass edit/delete handlers to TaskCard
  - [ ] Manage modal states for edit and delete dialogs

## Dev Notes

**[Source: docs/front-end-spec.md#User Flow 3: Edit an Existing Task]**

Edit flow: Click Edit → Modal opens with pre-filled data → User modifies → Save → Task updates in list.

**[Source: docs/front-end-spec.md#User Flow 4: Delete a Task]**

Delete flow: Click Delete → Confirmation dialog → Confirm → Task removed from list.

**[Source: docs/architecture/frontend-architecture.md#State Management Patterns]**

Use React Query optimistic updates for instant UI feedback on status toggle.

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-12 | 1.0 | Story created from Epic 2 | Bob (SM) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent after implementation_
