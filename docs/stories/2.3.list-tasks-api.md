# Story 2.3: List Tasks API

## Status
Ready

## Story

**As a** user,  
**I want** to retrieve all my tasks,  
**so that** I can see my complete task list.

## Acceptance Criteria

1. API endpoint `GET /tasks` returns array of Task objects belonging to authenticated user
2. Tasks are sorted by created_at descending (newest first)
3. Endpoint requires authentication and only returns tasks where owner_id matches authenticated user
4. Empty array returned if user has no tasks (not an error)
5. Response includes all task fields including label_ids
6. Successful response returns 200 status
7. Unit tests and integration tests verify: authenticated access, owner filtering, empty list handling

## Tasks / Subtasks

- [ ] Task 1: Implement get_tasks_by_owner in service (AC: 2, 3)
  - [ ] Update `backend/src/services/task_service.py`
  - [ ] Implement `async def get_tasks_by_owner(self, owner_id: str) -> List[TaskResponse]`
  - [ ] Call task_repository.find_by_owner(ObjectId(owner_id))
  - [ ] Return list of TaskResponse objects

- [ ] Task 2: Create GET /tasks route (AC: 1, 4, 5, 6)
  - [ ] Update `backend/src/api/v1/tasks.py`
  - [ ] Implement `GET /tasks` endpoint with `current_user = Depends(get_current_user)`
  - [ ] Call task_service.get_tasks_by_owner(current_user.id)
  - [ ] Return 200 with List[TaskResponse]
  - [ ] Empty list returns [] not 404

- [ ] Task 3: Write tests (AC: 7)
  - [ ] Update `backend/tests/test_tasks.py`
  - [ ] Test authenticated user gets their tasks
  - [ ] Test returns empty array for user with no tasks
  - [ ] Test requires authentication (401 without token)
  - [ ] Test ownership: user A cannot see user B's tasks
  - [ ] Test sorting: verify newest task first

## Dev Notes

**[Source: docs/architecture/api-specification.md#GET /tasks]**

**Endpoint:** `GET /tasks`  
**Auth:** Required  
**Response (200):** Array of Task objects, sorted newest first

**[Source: docs/architecture/backend-architecture.md#Controller Template]**

Implementation follows repository pattern with ownership filtering in find_by_owner method.

**Testing:** Verify empty array handling and ownership isolation.

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-12 | 1.0 | Story created from Epic 2 | Bob (SM) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent after implementation_
